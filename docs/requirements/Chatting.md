# 채팅 기능

## 설계 고민하기
1. 웹소켓을 사용한 채팅방 연결하기
   - 1:1 채팅방
     - [x] 친구와 방을 생성(중복 생성되면 안됨)
       - 추후 로그인 기능을 넣어서 자신의 로그인 정보와 친구 id를 통해 대화 연결하게 변경해야 함.
       - 해당 채팅방에 있는 유저가 아니라면 접근할 수 없도록 막아야 함
   - 그룹 채팅방
2. 채팅방들의 웹소켓 세션 정보를 관리하기
    - STOMP은 기본적으로 웹소켓 세션은 채팅방에 입장하고 종료할 때 생성하고 삭제한다.
    - 직접 웹소켓 세션을 관리하려면 STOMP는 부적합하다.
3. 메시지 보관하기
    - noSQL??
    - 메시지를 언제 보관할 것인가??
    - 메시지는 모두에게 전송이 잘 된 뒤에 단 한번만 저장하면 된다.
4. 발전 방향
   - 단일 서버 -> 여러 서버
     - 여러 서버라면 현재 메시지 브로커를 외부 메시지 브로커로 변경해서 사용해야 함.
   - message id 관리는 어떻게 하면 좋을까?